# FocusBoard

Wall-mounted Raspberry Pi focus monitor. Glance up, know your current task.

## How It Works

```
Mac (launchd, every 2 min)           Pi 3 B+ (focusboard.local)
─────────────────────────           ──────────────────────────
TODAY.md ─┐                         Chromium kiosk (portrait)
keystones.yaml ─┤                     reads state.json
focus.md ─┤                           renders dashboard
philosophy.md ─┘
    │
generate_state.py
    │
state.json ──── scp ────────────►  dashboard/state.json
```

- **No server, no database, no build step**
- Mac cron generates `state.json`, scp's to Pi
- Pi runs vanilla HTML/CSS/JS in Chromium kiosk
- Check boxes in Obsidian (TODAY.md) → Pi updates within 2 min

## Setup

### 1. Pi Setup

Flash Raspberry Pi OS (with desktop) to SD card. Set hostname `focusboard`, create your user. Enable SSH.

```bash
# From Mac - copy SSH keys
./setup-ssh.sh

# Run Pi installer via SSH
ssh youruser@focusboard.local 'bash -s' < pi/install.sh

# Deploy dashboard
./deploy.sh

# Reboot Pi
ssh youruser@focusboard.local 'sudo reboot'
```

### 2. Mac Setup

```bash
# Install launchd sync job (runs every 2 min)
./mac/install-mac.sh

# Verify
launchctl list | grep focusboard
cat ~/.claude/pi/state.json | python3 -m json.tool
```

### 3. TODAY.md Block Tracker

Add a `## Block Tracker` section to TODAY.md (generated by TIM reflect):

```markdown
## Block Tracker

- [ ] 6:30 Creation
- [ ] 9:15 Workout
- [ ] 10:30 DEV-1
...
```

Check `[x]` in Obsidian to mark blocks done. FocusBoard picks up changes within 2 min.

## Layout (Portrait, 1080x1920)

```
┌──────────────────────────────────┐
│  10:47 AM              Fri Feb 7 │  Clock + Date
├──────────────────────────────────┤
│                                  │
│           DEV-1                  │
│     ━━━━━━━━━━━━━━━━             │  Current Block (55%)
│                                  │
│     Define website scope         │
│     with Joey                    │
│                                  │
│     PROJECT-JINTENT.md:18        │
│     ◆ Keystone Trigger           │
│                                  │
├──────────────────────────────────┤
│  SCHEDULE                        │
│  ✅ 6:30  Creation               │  Schedule List (25%)
│  ▶  10:30 DEV-1                  │
│     11:10 DEV-2                  │
├──────────────────────────────────┤
│  K: ◆◆◇◇  │  Tomorrow: RECORD   │  Keystones + Tomorrow
├──────────────────────────────────┤
│  ● Synced 2 min ago             │  Sync Status
└──────────────────────────────────┘
```

## Commands

| Command | Purpose |
|---------|---------|
| `./mac/install-mac.sh` | Install Mac sync job |
| `./mac/uninstall-mac.sh` | Remove Mac sync job |
| `./deploy.sh` | Push dashboard updates to Pi |
| `python3 mac/generate_state.py` | Test state generation (stdout) |

## Files

```
mac/
  generate_state.py         # Reads MD/YAML → state.json
  generate-state.sh         # Shell wrapper (Python + scp)
  com.focusboard.sync.plist # launchd job (2 min)
  install-mac.sh            # Install launchd
  uninstall-mac.sh          # Remove launchd
pi/
  install.sh                # Pi setup (deps, rotation, service)
  uninstall.sh              # Remove from Pi
  scripts/chromium-kiosk.sh # Kiosk launcher
  config/focusboard.service # systemd unit
  dashboard/
    index.html              # Dashboard page
    style.css               # Dark theme, portrait
    app.js                  # Polling + rendering
    quotes.json             # Daily quotes
deploy.sh                   # Push to Pi
setup-ssh.sh                # SSH key setup
```
